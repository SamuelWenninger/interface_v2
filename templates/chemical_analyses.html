{% block body %}
<div class = "table-responsive">
  <table id="samplelist" class="table">
    <thead>
      <tr>
        <th>Sample</th>
        <th>Analysis Method</th>
        <th>Analysis Material</th>
        <th>Analyst</th>
        <th>Analysis Date</th>
        <th>Reference X</th>
        <th>Reference Y</th>
        <th>Total</th>
    </thead>
    <tbody>
      {% if total %}
      <p>Total: {{ total }}</p>
      {% endif %}
      {% for analysis in chemical_analyses %}
      <tr>
        <td td class="sample_value"><a href="{{ url_for('chemical_analysis', id=analysis.chemical_analysis_id) }}" target="_blank" >{% if analysis.sample_number %}{{ analysis.sample_number }}{% endif %}</a></td>
        <td class="sample_value">{% if analysis.analysis_method %}{{ analysis.analysis_method }}{% endif %}</td>
        <td class="sample_value">{% if analysis.minerals %}{{ analysis.minerals.name }}{% elif analysis.mineral__name %}{{ analysis.mineral__name }}{% endif %}</td>
        <td class="sample_value">{% if analysis.analyst %}{{ analysis.analyst }}{% endif %}</td>
        <td class="sample_value">{% if analysis.analysis_date %}{{ analysis.analysis_date }}{% endif %}</td>
        <td class="sample_value">{% if analysis.reference_x != None %}{{ analysis.reference_x }}{% endif %}</td>
        <td class="sample_value">{% if analysis.reference_y != None %}{{ analysis.reference_y }}{% endif %}</td>
        <td class="sample_value">{% if analysis.total %}{{ analysis.total }}{% endif %}</td>
      </tr>
      {%endfor%}
    </tbody>
    </thead>
  </table>
</div> <!-- table-responsive -->
&lt;&lt; <a class="chem-analyses-pagination" href="{{ first_page }}">First</a>
{% if prev_url %}
  &nbsp;&nbsp;&lt; <a class="chem-analyses-pagination" href="{{ prev_url }}">Prev</a>
{% endif %}
&nbsp;&nbsp;|
{% if next_url %}
  &nbsp;&nbsp; <a class="chem-analyses-pagination" href="{{ next_url }}">Next</a> &gt;
{% endif %}
&nbsp;&nbsp; <a class="chem-analyses-pagination" href="{{ last_page }}">Last</a> &gt;&gt;

<script>
//Ajax call for first, last, next and previous chem analyses
$('.chem-analyses-pagination').click(function (event) 
{
 if(document.URL.indexOf("search") !== -1)
 {
  console.log(document.URL.indexOf("search"));
   event.preventDefault(); 
   var url = $(this).attr('href');
    $('#spinner').show();
        $.ajax({
      type: "GET",
            url: url,
            success: function (data) {
                $("#results").html(data);
                $('#spinner').hide();
            },
            error: function(data) {
                $("#results").html("Error");
                $('#spinner').hide();
            }
        });
        return false;
  } //endif
  else
   window.location = url;
 });
</script>
{% endblock %}
